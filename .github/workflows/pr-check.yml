name: PR å¿«é€Ÿæ£€æŸ¥

# ğŸ macOS x86 (Intel) ä¸“ç”¨åº”ç”¨
# æ³¨æ„ï¼šPR å¿«é€Ÿæ£€æŸ¥åªè¿›è¡Œé™æ€ä»£ç åˆ†æï¼ˆå¯ä»¥åœ¨ Ubuntu ä¸Šè¿è¡Œï¼‰
#      å®Œæ•´æµ‹è¯•ä¼šåœ¨åˆå¹¶åçš„ CI æµç¨‹ä¸­åœ¨ macOS x86 ç¯å¢ƒè¿›è¡Œ

on:
  pull_request:
    types: [opened, synchronize, reopened]

# åªå…è®¸ä¸€ä¸ª workflow è¿è¡Œåœ¨åŒä¸€ä¸ª PR ä¸Š
concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number }}
  cancel-in-progress: true

jobs:
  quick-check:
    name: å¿«é€Ÿä»£ç æ£€æŸ¥
    runs-on: ubuntu-latest  # é™æ€ä»£ç æ£€æŸ¥å¯ä»¥åœ¨ä»»ä½•å¹³å°ä¸Šè¿è¡Œ

    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4

    - name: è®¾ç½® Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
        cache: 'pip'

    - name: å®‰è£…æ£€æŸ¥å·¥å…·
      run: |
        python -m pip install --upgrade pip
        pip install ruff

    - name: ğŸ” Ruff å¿«é€Ÿæ£€æŸ¥
      run: |
        echo "è¿è¡Œ Ruff ä»£ç æ£€æŸ¥..."
        ruff check plookingII/ --output-format=github

    - name: ğŸ” Ruff æ ¼å¼æ£€æŸ¥
      run: |
        echo "æ£€æŸ¥ä»£ç æ ¼å¼..."
        ruff format --check plookingII/

    - name: ğŸ“ æ£€æŸ¥ç»“æœ
      if: always()
      run: |
        echo "âœ… PR å¿«é€Ÿæ£€æŸ¥å®Œæˆ"

  pr-info:
    name: PR ä¿¡æ¯
    runs-on: ubuntu-latest
    steps:
    - name: æ˜¾ç¤º PR ä¿¡æ¯
      run: |
        echo "================================================"
        echo "ğŸ PlookingII PR å¿«é€Ÿæ£€æŸ¥ (macOS x86 ä¸“ç”¨åº”ç”¨)"
        echo "================================================"
        echo "PR #${{ github.event.pull_request.number }}"
        echo "æ ‡é¢˜: ${{ github.event.pull_request.title }}"
        echo "ä½œè€…: ${{ github.event.pull_request.user.login }}"
        echo "åˆ†æ”¯: ${{ github.event.pull_request.head.ref }}"
        echo "ç›®æ ‡: ${{ github.event.pull_request.base.ref }}"
        echo "================================================"
        echo "æ³¨æ„: å®Œæ•´æµ‹è¯•éœ€è¦åœ¨ macOS x86 ç¯å¢ƒä¸­è¿›è¡Œ"
        echo "      PR åˆå¹¶åä¼šè§¦å‘å®Œæ•´çš„ CI æµç¨‹"
        echo "================================================"
