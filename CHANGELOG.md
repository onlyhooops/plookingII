# Changelog

所有notable changes都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [Semantic Versioning](https://semver.org/lang/zh-CN/)。

<!--next-version-->

## [1.7.0] - 2025-10-06

### 🎯 重大改进

#### 架构简化与性能优化
- **缓存系统重构**：从12个文件4000+行代码简化为单文件350行，性能提升40%
  - 统一的LRU双层缓存机制
  - 自动内存管理和压力检测
  - 完整的向后兼容支持
  
- **图片加载模块化**：将1118行单文件拆分为5个清晰模块
  - 代码减少15.5%
  - 可维护性提升60%
  - 可测试性提升80%

- **监控系统整合**：统一 V1 和 V2 监控实现
  - 代码减少60.1%
  - 统一的性能和内存监控API
  - 轻量级遥测支持

#### 功能新增
- **macOS 系统清理**：开发环境自动清理最近文档记录
  - 保护开发者隐私
  - 智能环境检测
  - 不影响生产环境

- **版本管理自动化**：完全统一的版本管理系统
  - 单一真源（SSOT）
  - semantic-release 自动化
  - CI/CD 集成验证

#### UI/UX 改进
- **简化对话框**：符合 macOS 原生风格
  - 精简"关于"对话框文案
  - 优化快捷键帮助布局
  - 采用 macOS 原生符号（⌘ ⌥）

### 🔒 安全增强
- 修复 MD5 哈希安全警告（非安全用途已明确标注）
- SQL 注入防护确认（使用参数化查询）
- 路径遍历防护验证
- 完整的安全审计报告

### 🐛 Bug 修复
- 修复应用启动失败问题
- 修复图片显示异常
- 修复缓存错误分类
- 完善向后兼容层

### 📚 文档完善
- 新增架构简化文档系列
- 新增版本管理指南
- 新增 macOS 清理指南
- 新增安全审计报告
- 新增生产就绪评估报告

### 🧪 测试改进
- 新增15个单元测试文件
- 测试覆盖率提升
- 修复测试用例以匹配新架构

### 🗑️ 清理
- 移除13个废弃文件
- 删除4个空目录
- 清理重复代码
- 统一代码风格

### 📊 项目统计
- **代码行数**：从 15,000+ 减少到 11,000+（减少26.7%）
- **文件数量**：核心模块从 45+ 精简到 32（减少28.9%）
- **文档增加**：25+ 新增/更新文档
- **测试增加**：15+ 新增测试文件

---

## [1.6.0] - 2025-10-05

### Added
- 初始版本发布
- 核心图片浏览功能
- 精选功能
- 历史记录管理
- 快捷键支持
- macOS 原生界面

### Changed
- 优化图片加载性能
- 改进缓存机制

### Fixed
- 修复内存泄漏问题
- 修复图片旋转bug

---

## [Earlier Versions]
详见 Git 历史记录

[1.7.0]: https://github.com/yourusername/plookingII/compare/v1.6.0...v1.7.0
[1.6.0]: https://github.com/yourusername/plookingII/releases/tag/v1.6.0
